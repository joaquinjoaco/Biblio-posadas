generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Ubicacion {
  DENTRO
  FUERA
}

model Libro {
  inventario   Int    @id @default(autoincrement()) // No se debe poder editar.
  colocacion   String @db.VarChar(255)
  autor        String @db.VarChar(255)
  titulo       String @db.VarChar(255)
  pais         String @db.VarChar(255)
  descriptores String @db.VarChar(255)

  isArchived Boolean @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  Prestamo Prestamo[] // Historial de préstamos de un libro.
}

model Socio {
  id        Int       @id @default(autoincrement()) // No se debe poder editar.
  ci        Int       @unique
  nombre    String
  apellido  String
  direccion String
  telefono  String
  ubicacion Ubicacion

  isArchived Boolean @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  Prestamo Prestamo[] // Historial de préstamos de un socio.
}

model Prestamo {
  id Int @id @default(autoincrement())

  idLibro Int
  libro   Libro @relation(fields: [idLibro], references: [inventario])

  idSocio Int
  socio   Socio @relation(fields: [idSocio], references: [id])

  fechaPrestado             DateTime
  fechaDevolucionEstipulada DateTime
  // Un préstamo se considera devuelto o finalizado cuando tiene una fecha de devolución final.
  fechaDevolucionFinal      DateTime?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
